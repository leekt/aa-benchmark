pragma solidity ^0.8.4;

bytes constant SOLADY_ERC4337_BYTECODE =
    hex"6080604052600436106101395760003560e01c806384b0196e116100ab578063c399ec881161006f578063c399ec8814610318578063c4d66de81461032d578063cb0fec1f14610340578063f04e283e1461035f578063f2fde38b14610372578063fee81cf41461038557610140565b806384b0196e146102645780638da5cb5b14610291578063b0d691fe146102be578063b10cc728146102e5578063b61d27f61461030557610140565b80634a58db19116100fd5780634a58db19146102115780634d44560d146102195780634f1ef2861461022c57806352d1902d1461023f57806354d1f13d14610254578063715018a61461025c57610140565b8063125b14e5146101775780631626ba7e1461018a57806325692962146101c857806334fcd5be146101d05780633a871cdd146101f057610140565b3661014057005b60003560e01c63bc197c81811463f23a6e6182141763150b7a028214171561016c57806020526020603cf35b506101756103b8565b005b610175610185366004610d86565b610450565b34801561019657600080fd5b506101aa6101a5366004610df1565b61049d565b6040516001600160e01b031990911681526020015b60405180910390f35b610175610531565b6101e36101de366004610e3d565b610581565b6040516101bf9190610ef8565b6102036101fe366004610f5c565b610623565b6040519081526020016101bf565b61017561067f565b610175610227366004610fcc565b6106ac565b61017561023a366004610ff6565b61070a565b34801561024b57600080fd5b506102036107dc565b610175610829565b610175610865565b34801561027057600080fd5b50600f60f81b60608046306000836040516101bf9796959493929190611030565b34801561029d57600080fd5b50638b78c6d819545b6040516001600160a01b0390911681526020016101bf565b3480156102ca57600080fd5b50735ff137d4b0fdcd49dca30c7cf57e578a026d27896102a6565b6102f86102f3366004610ff6565b610879565b6040516101bf91906110c9565b6102f86103133660046110e3565b610913565b34801561032457600080fd5b5061020361096f565b61017561033b36600461113d565b6109ae565b34801561034c57600080fd5b5061020361035b366004611158565b5490565b61017561036d36600461113d565b6109b7565b61017561038036600461113d565b6109f4565b34801561039157600080fd5b506102036103a036600461113d565b63389a75e1600c908152600091909152602090205490565b366103c1573636f35b6000805b803682106103d3575061042f565b600180830192600319810190351860001a908161041f57600019855260028301933560021984011860001a607f80821161040e578282013888395b169490940190930192506103c59050565b81855380850194505050506103c5565b50600038826000305af490503d6000803e8061044a573d6000fd5b503d6000f35b33735ff137d4b0fdcd49dca30c7cf57e578a026d27891461047357610473610a1b565b816000805160206111b98339815191528114638b78c6d8198214171561049857600038fd5b509055565b600060405160608303840160608160003761190160005260608410866042601e2018176104df57606084039350803560005285602052606060002095506104fa565b60208403602085110293508560605260408020955060006060525b50604052600061051b61050b610a59565b61051487610a6d565b8686610b85565b15600003631626ba7e1760e01b95945050505050565b60006202a30067ffffffffffffffff164201905063389a75e1600c5233600052806020600c2055337fdbf36a107da19e49527a7176a1babf963b4b0ff8cde35ee35d6cd8f1f9ac7e1d600080a250565b606033735ff137d4b0fdcd49dca30c7cf57e578a026d2789146105a6576105a6610a1b565b6040519050818152806020018260051b81018360051b858337805b8083146106185782518601604081013581018035602082018537600038823586602086013586355af16105f7573d6000853e3d84fd5b50508183523d8252602082013d6000823e602093909301923d0191506105c1565b506040525092915050565b600033735ff137d4b0fdcd49dca30c7cf57e578a026d278914610658576040516282b42960e81b815260040160405180910390fd5b816106638585610c7f565b915080156106775760003860003884335af1505b509392505050565b735ff137d4b0fdcd49dca30c7cf57e578a026d2789600038818134855af1813b026106a957600038fd5b50565b6106b4610a1b565b6000735ff137d4b0fdcd49dca30c7cf57e578a026d27899050826014528160345263040b850f60631b600052600038604460106000855af1813b02610700573d60006040513e3d604051fd5b6000603452505050565b7f0000000000000000000000003c66d0e5180d225f69168a9016085ee135b0d2bf30810361074057639f03a0266000526004601cfd5b61074984610cdd565b8360601b60601c93506352d1902d6001526000805160206111b983398151915280602060016004601d895afa5114610789576355299b496001526004601dfd5b847fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b600038a284905581156107d657604051828482376000388483885af46107d4573d6000823e3d81fd5b505b50505050565b60007f0000000000000000000000003c66d0e5180d225f69168a9016085ee135b0d2bf30811461081457639f03a0266000526004601cfd5b6000805160206111b983398151915291505090565b63389a75e1600c523360005260006020600c2055337ffa7b8eab7da67f412cc9575ed43464468f9bfbae89d1675917346ca6d8fe3c92600080a2565b61086d610a1b565b6108776000610ce5565b565b606033735ff137d4b0fdcd49dca30c7cf57e578a026d27891461089e5761089e610a1b565b506000805160206111b983398151915254638b78c6d8195460405191838584376000388585895af46108d3573d6000843e3d83fd5b3d8352602083013d6000823e3d01604052638b78c6d819546000805160206111b98339815191525482149083141661090a57600038fd5b50509392505050565b606033735ff137d4b0fdcd49dca30c7cf57e578a026d27891461093857610938610a1b565b5060405181838237600038838387895af1610956573d6000823e3d81fd5b3d8152602081013d6000823e3d01604052949350505050565b600080735ff137d4b0fdcd49dca30c7cf57e578a026d27899050306020526370a082316000526020806024601c845afa601f3d11166020510291505090565b6106a981610d2c565b6109bf610a1b565b63389a75e1600c52806000526020600c2080544211156109e757636f5e88186000526004601cfd5b600090556106a981610ce5565b6109fc610a1b565b8060601b610a1257637448fbae6000526004601cfd5b6106a981610ce5565b638b78c6d819546001600160a01b0316336001600160a01b03161461087757333014610877576040516282b42960e81b815260040160405180910390fd5b6000610a68638b78c6d8195490565b905090565b7f8cff97a4774267a8959e42f80e18f8a2de4cacd9860af178077c05b3ac95a84e7f0000000000000000000000003c66d0e5180d225f69168a9016085ee135b0d2bf30147f0000000000000000000000000000000000000000000000000000000000014a33461416610b605750604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f81527fc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a47060208201527fc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a4709181019190915246606082015230608082015260a090205b67190100000000000060005280601a5281603a52604260182090506000603a52919050565b6001600160a01b039093169260008415610c77576040518460005260408303610bf05760208481013560ff81901c601b01825285356040526001600160ff1b0316606052600160806000825afa805187183d1517610bee57506000606052604052506001610c77565b505b60418303610c3357604084013560001a602052604084604037602060016080600060015afa805187183d1517610c3157506000606052604052506001610c77565b505b600060605280604052631626ba7e60e01b80825285600483015260248201604081528460448401528486606485013760208160648701858b5afa9051909114169150505b949350505050565b600080610cd4610c92638b78c6d8195490565b610cc1856020527b19457468657265756d205369676e6564204d6573736167653a0a3332600052603c60042090565b610ccf610140880188611171565b610b85565b15949350505050565b6106a9610a1b565b638b78c6d81980546001600160a01b039092169182907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a3811560ff1b8217905550565b638b78c6d819805415610d4757630dc149f06000526004601cfd5b6001600160a01b03909116801560ff1b81179091558060007f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08180a350565b60008060408385031215610d9957600080fd5b50508035926020909101359150565b60008083601f840112610dba57600080fd5b50813567ffffffffffffffff811115610dd257600080fd5b602083019150836020828501011115610dea57600080fd5b9250929050565b600080600060408486031215610e0657600080fd5b83359250602084013567ffffffffffffffff811115610e2457600080fd5b610e3086828701610da8565b9497909650939450505050565b60008060208385031215610e5057600080fd5b823567ffffffffffffffff80821115610e6857600080fd5b818501915085601f830112610e7c57600080fd5b813581811115610e8b57600080fd5b8660208260051b8501011115610ea057600080fd5b60209290920196919550909350505050565b6000815180845260005b81811015610ed857602081850181015186830182015201610ebc565b506000602082860101526020601f19601f83011685010191505092915050565b600060208083016020845280855180835260408601915060408160051b87010192506020870160005b82811015610f4f57603f19888603018452610f3d858351610eb2565b94509285019290850190600101610f21565b5092979650505050505050565b600080600060608486031215610f7157600080fd5b833567ffffffffffffffff811115610f8857600080fd5b84016101608187031215610f9b57600080fd5b95602085013595506040909401359392505050565b80356001600160a01b0381168114610fc757600080fd5b919050565b60008060408385031215610fdf57600080fd5b610fe883610fb0565b946020939093013593505050565b60008060006040848603121561100b57600080fd5b61101484610fb0565b9250602084013567ffffffffffffffff811115610e2457600080fd5b60ff60f81b881681526000602060e0602084015261105160e084018a610eb2565b8381036040850152611063818a610eb2565b606085018990526001600160a01b038816608086015260a0850187905284810360c08601528551808252602080880193509091019060005b818110156110b75783518352928401929184019160010161109b565b50909c9b505050505050505050505050565b6020815260006110dc6020830184610eb2565b9392505050565b600080600080606085870312156110f957600080fd5b61110285610fb0565b935060208501359250604085013567ffffffffffffffff81111561112557600080fd5b61113187828801610da8565b95989497509550505050565b60006020828403121561114f57600080fd5b6110dc82610fb0565b60006020828403121561116a57600080fd5b5035919050565b6000808335601e1984360301811261118857600080fd5b83018035915067ffffffffffffffff8211156111a357600080fd5b602001915036819003821315610dea57600080fdfe360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbca264697066735822122084b54e61e61c23d4dfc7a753dd1f8379f6f90aa9a0d99015c71d40f3d2baf1d464736f6c63430008170033";

bytes constant SOLADY_ERC4337_FACTORY_BYTECODE =
    hex"60806040526004361061003f5760003560e01c806321f8a721146100445780635c60da1b14610081578063db4c545e146100b5578063f14ddffc146100d8575b600080fd5b34801561005057600080fd5b5061006461005f36600461038d565b6100eb565b6040516001600160a01b0390911681526020015b60405180910390f35b34801561008d57600080fd5b506100647f0000000000000000000000003c66d0e5180d225f69168a9016085ee135b0d2bf81565b3480156100c157600080fd5b506100ca61011e565b604051908152602001610078565b6100646100e63660046103a6565b61014e565b60006101187f0000000000000000000000003c66d0e5180d225f69168a9016085ee135b0d2bf83306101c5565b92915050565b60006101497f0000000000000000000000003c66d0e5180d225f69168a9016085ee135b0d2bf6101e7565b905090565b600061015a828461025c565b600080610188347f0000000000000000000000003c66d0e5180d225f69168a9016085ee135b0d2bf86610287565b91509150816101bd578460145263189acdbd60631b600052600038602460106000855af16101bd573d60006040513e3d604051fd5b949350505050565b6000806101d1856101e7565b90506101de81858561036b565b95945050505050565b604080517fcc3735a920a3ca505d382bbc545af43d6000803e6038573d6000fd5b3d6000f360609081527f5155f3363d3d373d3d363d7f360894a13ba1a3210667c828492db98dca3e20768352616009602052601e9390935268603d3d8160223d3973600a52605f6021209152600090915290565b606082901c80156001600160a01b0383169091141761028357630c4549ef6000526004601cfd5b5050565b6000806040517fcc3735a920a3ca505d382bbc545af43d6000803e6038573d6000fd5b3d6000f36060527f5155f3363d3d373d3d363d7f360894a13ba1a3210667c828492db98dca3e207660405261600960205284601e5268603d3d8160223d3973600a52605f60212060358201523060581b815260ff8153836015820152605581209150813b6103335783605f602188f591508161032e5763301164256000526004601cfd5b610359565b6001925085156103595760003860003889865af16103595763b12d13eb6000526004601cfd5b80604052506000606052935093915050565b600060ff60005350603592835260601b60015260155260556000908120915290565b60006020828403121561039f57600080fd5b5035919050565b600080604083850312156103b957600080fd5b82356001600160a01b03811681146103d057600080fd5b94602093909301359350505056fea2646970667358221220f87bb8430bd93b15d5b73b3bd54a2992f0d69f5d91fe8c180fe36e443159778664736f6c63430008170033";

address constant SOLADY_FACTORY = 0x61E8a0f5F881277E1444A6E35921F3a1A73101C0;
address constant SOLADY_ERC4337 = 0x3c66D0E5180D225f69168A9016085EE135b0D2bf;

interface ERC4337Factory {
    function createAccount(address owner, bytes32 salt) external payable returns (address account);
    function implementation() external pure returns (address);
    function initCodeHash() external view returns (bytes32 result);
}

interface ERC4337 {
    function execute(address _to, uint256 _value, bytes calldata _data) external;
}
