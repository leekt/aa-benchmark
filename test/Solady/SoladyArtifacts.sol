pragma solidity ^0.8.4;

bytes constant SOLADY_ERC4337_BYTECODE =
    hex"60806040526004361015610015575b36610fc657005b60003560e01c8063125b14e5146101755780631626ba7e14610170578063256929621461016b57806334fcd5be146101665780633659cfe6146101615780633a871cdd1461015c5780634a58db19146101575780634d44560d146101525780634f1ef2861461014d57806352d1902d1461014857806354d1f13d14610143578063715018a61461013e5780638da5cb5b14610139578063b0d691fe14610134578063b10cc7281461012f578063b61d27f61461012a578063c399ec8814610125578063c4d66de814610120578063cb0fec1f1461011b578063f04e283e14610116578063f2fde38b146101115763fee81cf40361000e57610ef6565b610e9c565b610e2e565b610df1565b610d41565b610cd7565b610bfc565b610b2b565b610aca565b610a59565b6109b9565b610954565b6108fb565b6108c8565b6107cb565b610778565b61060b565b6105d1565b610490565b610345565b610260565b60407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d57735ff137d4b0fdcd49dca30c7cf57e578a026d27893303610220575b61021e7fffffffffffffffffffffffffffffffffffffffffffffffffffffffff748739278054906102177f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc805490602435600435555414610f47565b5414610f47565b005b610228610f7d565b6101bb565b600080fd5b9181601f8401121561022d5782359167ffffffffffffffff831161022d576020838186019501011161022d57565b3461022d5760407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d5760243567ffffffffffffffff811161022d5761030e6102b46020923690600401610232565b907fffffffffffffffffffffffffffffffffffffffffffffffffffffffff74873927546103086004356020527b19457468657265756d205369676e6564204d6573736167653a0a3332600052603c60042090565b90611140565b15600003631626ba7e1760e01b7fffffffff0000000000000000000000000000000000000000000000000000000060405191168152f35b6000807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103af5763389a75e1600c523381526202a30042016020600c2055337fdbf36a107da19e49527a7176a1babf963b4b0ff8cde35ee35d6cd8f1f9ac7e1d8280a280f35b80fd5b919082519283825260005b8481106103fc5750507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f8460006020809697860101520116010190565b6020818301810151848301820152016103bd565b602080820190808352835180925260408301928160408460051b8301019501936000915b8483106104445750505050505090565b9091929394958480610480837fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc086600196030187528a516103b2565b9801930193019194939290610434565b6020807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d5760043567ffffffffffffffff9182821161022d573660238301121561022d57816004013592831161022d578260051b9160243681858401011161022d57735ff137d4b0fdcd49dca30c7cf57e578a026d278933036105a1575b604051948552848401830193858401939285929181830186375b828503610549578580610545898260405282610410565b0390f35b909192939480865183016064810135810185810135806044809301853760009384938838948201359101355af115610599578187523d8252859182913d908383013e3d010195019392919061052e565b3d90823e3d90fd5b6105a9610f7d565b610514565b6004359073ffffffffffffffffffffffffffffffffffffffff8216820361022d57565b60207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d5761021e6106066105ae565b611224565b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc60608136011261022d5767ffffffffffffffff9060043582811161022d576101608136039283011261022d5760443591735ff137d4b0fdcd49dca30c7cf57e578a026d2789330361074e577fffffffffffffffffffffffffffffffffffffffffffffffffffffffff7487392754906106cb6024356020527b19457468657265756d205369676e6564204d6573736167653a0a3332600052603c60042090565b927fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdd610144820135920182121561022d5701600481013594851161022d5760240193803603851361022d5761054594849361072593611140565b159161073d575b506040519081529081906020820190565b60009081803892335af1503861072c565b60046040517f82b42900000000000000000000000000000000000000000000000000000000008152fd5b6000807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103af57735ff137d4b0fdcd49dca30c7cf57e578a026d27898138818034855af1903b02156103af5780f35b60407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d576107fd6105ae565b610805610f7d565b60145260243560345260006f205c28780000000000000000000000008152735ff137d4b0fdcd49dca30c7cf57e578a026d278981386044601083855af1903b021561084d5780f35b3d906040513e3d604051fd5b9060407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc83011261022d5760043573ffffffffffffffffffffffffffffffffffffffff8116810361022d57916024359067ffffffffffffffff821161022d576108c491600401610232565b9091565b60006108d336610859565b6108df83929493611224565b806040519485378338925af4156108f257005b3d6000823e3d90fd5b3461022d5760007ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d5760206040517f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc8152f35b6000807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103af5763389a75e1600c52338152806020600c2055337ffa7b8eab7da67f412cc9575ed43464468f9bfbae89d1675917346ca6d8fe3c928280a280f35b6000807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103af576109ec610f7d565b7f80000000000000000000000000000000000000000000000000000000000000007fffffffffffffffffffffffffffffffffffffffffffffffffffffffff748739278281547f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a35580f35b3461022d5760007ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d5760207fffffffffffffffffffffffffffffffffffffffffffffffffffffffff748739275473ffffffffffffffffffffffffffffffffffffffff60405191168152f35b3461022d5760007ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d576020604051735ff137d4b0fdcd49dca30c7cf57e578a026d27898152f35b906020610b289281815201906103b2565b90565b610b3436610859565b735ff137d4b0fdcd49dca30c7cf57e578a026d27899291923303610bef575b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffff748739279081549260007f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc91825493806040519889378738925af415610be55791610217610545959492610bd9943d87523d6000602089013e60203d8801016040525414610f47565b60405191829182610b17565b843d6000823e3d90fd5b610bf7610f7d565b610b53565b60607ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d57610c2e6105ae565b60443567ffffffffffffffff811161022d57610c506000913690600401610232565b735ff137d4b0fdcd49dca30c7cf57e578a026d27899391933303610cca575b80604051948537833892602435905af1156108f2573d81523d6000602083013e7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe03d8201610cc560208201938460405284610b17565b030190f35b610cd2610f7d565b610c6f565b3461022d5760007ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d57306020526370a08231600052602080806024601c735ff137d4b0fdcd49dca30c7cf57e578a026d27895afa601f3d1116815102604051908152f35b60207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d57610d736105ae565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffff74873927908154610de35773ffffffffffffffffffffffffffffffffffffffff1690811560ff1b8217905560007f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08180a3005b630dc149f06000526004601cfd5b3461022d5760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d57602060043554604051908152f35b60207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d57610e606105ae565b610e68610f7d565b63389a75e1600c52806000526020600c209081544211610e8e57600061021e92556110d6565b636f5e88186000526004601cfd5b60207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d57610ece6105ae565b610ed6610f7d565b8060601b15610ee85761021e906110d6565b637448fbae6000526004601cfd5b3461022d5760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261022d57610f2d6105ae565b63389a75e1600c52600052602080600c2054604051908152f35b15610f4e57565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052600160045260246000fd5b73ffffffffffffffffffffffffffffffffffffffff7fffffffffffffffffffffffffffffffffffffffffffffffffffffffff7487392754163303610fbd57565b30330361074e57565b6000803560e01c63bc197c81811463f23a6e6182141763150b7a028214176110cd575036156110c95780805b8092368210156110af5781357ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc830118831a600180930194811561103d5750815301905b9091610ff2565b9460029150357ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffd860118841a9401937fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8252607f90818111156110a4575b16010190611036565b83810138843961109b565b829150389082305af43d82803e156110c5573d90f35b3d90fd5b3636f35b6020526020603cf35b73ffffffffffffffffffffffffffffffffffffffff167fffffffffffffffffffffffffffffffffffffffffffffffffffffffff74873927908082547f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a3801560ff1b179055565b9193929060009473ffffffffffffffffffffffffffffffffffffffff600094168061116d575b5050505050565b909192939550604091825190604186146111e2575b6020949596976060528184527f1626ba7e00000000000000000000000000000000000000000000000000000000958683526004830152602482019687948552806044840152806064928385013701915afa91511416903880808080611166565b848852602084820135891a8152848281376001908160808b825afa5184183d15171561120e5750611182565b9394505093505093606052523880808080611166565b73ffffffffffffffffffffffffffffffffffffffff90611242610f7d565b166352d1902d6001527f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc80602060016004601d865afa51036112a757817fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b600080a255565b6355299b496001526004601dfdfea26469706673582212208e2b53997b07a43935962519b36912e643ba90960007f8104cc0e57b98a740b164736f6c63430008120033";

bytes constant SOLADY_ERC4337_FACTORY_BYTECODE =
    hex"60806040526004361061003f5760003560e01c80634c96a389146100445780635c60da1b14610074578063db4c545e146100a8578063e919e3ea14610152575b600080fd5b610057610052366004610375565b610165565b6040516001600160a01b0390911681526020015b60405180910390f35b34801561008057600080fd5b506100577f0000000000000000000000004d40c4063a11f674bdae7425ab6371fda1a00f8a81565b3480156100b457600080fd5b50604080517fcc3735a920a3ca505d382bbc545af43d6000803e6038573d6000fd5b3d6000f360609081527f5155f3363d3d373d3d363d7f360894a13ba1a3210667c828492db98dca3e2076835261600960209081527f0000000000000000000000004d40c4063a11f674bdae7425ab6371fda1a00f8a601e5268603d3d8160223d3973600a52605f6021209383905260009091529181520161006b565b610057610160366004610397565b6101a2565b6000610191347f0000000000000000000000004d40c4063a11f674bdae7425ab6371fda1a00f8a6101eb565b905061019d8183610278565b919050565b60006101ae82846102a8565b6101d9347f0000000000000000000000004d40c4063a11f674bdae7425ab6371fda1a00f8a846102cf565b90506101e58184610278565b92915050565b60006040517fcc3735a920a3ca505d382bbc545af43d6000803e6038573d6000fd5b3d6000f36060527f5155f3363d3d373d3d363d7f360894a13ba1a3210667c828492db98dca3e207660405261600960205282601e5268603d3d8160223d3973600a52605f602185f091508161026a5763301164256000526004601cfd5b604052600060605292915050565b8060145263189acdbd60631b600052600038602460106000865af16102a4573d60006040513e3d604051fd5b5050565b606082901c80156001600160a01b038316909114176102a457630c4549ef6000526004601cfd5b60006040517fcc3735a920a3ca505d382bbc545af43d6000803e6038573d6000fd5b3d6000f36060527f5155f3363d3d373d3d363d7f360894a13ba1a3210667c828492db98dca3e207660405261600960205283601e5268603d3d8160223d3973600a5282605f602187f591508161034f5763301164256000526004601cfd5b60405260006060529392505050565b80356001600160a01b038116811461019d57600080fd5b60006020828403121561038757600080fd5b6103908261035e565b9392505050565b600080604083850312156103aa57600080fd5b6103b38361035e565b94602093909301359350505056fea26469706673582212206d5e1a491e54bff88ef13b1e68c3ced6261c2da1b727ebc14fd20c04aed2b2c464736f6c63430008120033";

address constant SOLADY_FACTORY = 0xBC269dE1f07797789b0B02BCcCEDB9bDeFAB90eb;
address constant SOLADY_ERC4337 = 0x4d40C4063a11f674BdAe7425Ab6371FdA1a00F8a;

interface ERC4337Factory {
    function deployDeterministic(address owner, bytes32 salt) external payable returns (address account);
    function implementation() external pure returns (address);
    function initCodeHash() external view returns (bytes32 result);
}

interface ERC4337 {
    function execute(address _to, uint256 _value, bytes calldata _data) external;
}
